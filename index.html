<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modern Cars</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#000;
  --white:#fff;
  --muted: rgba(255,255,255,0.72);
  --success:#25D366;
  --radius:14px;
}
*{box-sizing:border-box; margin:0; padding:0;}
html,body{height:100%; font-family:Inter, system-ui, sans-serif; color:var(--white); background:var(--bg); overflow:hidden;}
body{display:flex; flex-direction:column; justify-content:space-between;}
canvas{position:fixed; inset:0; z-index:0;}
.wrap{position:relative; z-index:2; max-width:980px; margin:0 auto; padding:40px 16px; display:flex; flex-direction:column; align-items:center; gap:24px;}
.logo img{width:64px; height:64px; border-radius:12px; object-fit:cover;}
.hero{text-align:center;}
.hero .h1{font-size:34px; font-weight:800; background: linear-gradient(90deg, #fff, rgba(255,255,255,0.9)); -webkit-background-clip:text; color:transparent;}
.hero .short{margin-top:6px; color:var(--muted); font-size:14px;}
.cta-card{background:rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.04); border-radius:14px; padding:20px; min-width:280px; display:flex; flex-direction:column; gap:12px; backdrop-filter: blur(6px);}
.cta-title{font-weight:800; font-size:15px; text-align:center;}
form{display:flex; flex-direction:column; gap:10px;}
input{padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.06); background:transparent; color:white;}
#submitBtn{margin-top:10px; padding:12px; border-radius:12px; font-weight:800; color:white; background:linear-gradient(90deg, rgba(37,211,102,0.13), rgba(255,255,255,0.01)); border:1px solid rgba(37,211,102,0.16); cursor:pointer; display:flex; align-items:center; justify-content:center; gap:8px;}
.pulse{width:12px; height:12px; border-radius:50%; background:var(--success); animation:pulse 1.6s infinite;}
@keyframes pulse{0%{transform:scale(0.86);opacity:0.95}70%{transform:scale(1.45);opacity:0.5}100%{transform:scale(0.86);opacity:0.95}}
footer{color:var(--muted); text-align:center; padding:12px; font-size:13px; z-index:2;}
</style>
</head>
<body>
<canvas id="bg-canvas" aria-hidden="true"></canvas>
<div class="wrap">
  <div class="logo"><img src="logo.jpeg" alt="Modern Cars"></div>
  <div class="hero">
    <h1 class="h1">Modern Cars</h1>
    <div class="short">–†—É—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ –≤—Å–µ –≤–∏–¥—ã –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π</div>
  </div>
  <aside class="cta-card">
    <div class="cta-title">WhatsApp “õ–∞ “õ–æ—Å—ã–ª—ã“£—ã–∑</div>
    <form id="leadForm">
      <input id="name" name="name" type="text" placeholder="–ï—Å—ñ–º—ñ“£—ñ–∑" required maxlength="80">
      <input id="phone" name="phone" type="tel" placeholder="+7 (___) ___-__-__" required>
      <button type="submit" id="submitBtn"><span class="pulse"></span> WhatsApp “õ–æ—Å—ã–ª—É</button>
      <div id="formMsg" style="color:lightgray;font-size:13px;display:none;text-align:center;margin-top:6px;"></div>
    </form>
  </aside>
</div>
<footer>¬© 2025 Modern Cars - –≤—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</footer>

<script>
// üîπ Google Apps Script Web App URL
const GAS_WEB_APP_URL = "https://script.google.com/macros/s/AKfycby0JIFkltCR5bhpD5IsmvyLnk1cZKbhaSdXVyer-VPjb0TL1W44OmqHZrP2GHcVl8o/exec"; // –ú“±–Ω–¥–∞ ”©–∑—ñ“£—ñ–∑–¥—ñ“£ URL “õ–æ–π—ã“£—ã–∑
const WHATSAPP_INVITE_LINK = "https://chat.whatsapp.com/IQYwOkjSk0IC19qx7aPT1Z";

const form = document.getElementById('leadForm');
const submitBtn = document.getElementById('submitBtn');
const msgEl = document.getElementById('formMsg');

form.addEventListener('submit', async function(e){
  e.preventDefault();
  const name = document.getElementById('name').value.trim();
  const phoneRaw = document.getElementById('phone').value.trim();
  const phone = '+' + phoneRaw.replace(/\D/g,'');

  msgEl.style.display='none';
  if(!name){msgEl.textContent='–í–≤–µ–¥–∏—Ç–µ –∏–º—è'; msgEl.style.display='block'; return;}
  if(phone.length<11){msgEl.textContent='–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä'; msgEl.style.display='block'; return;}

  submitBtn.disabled=true; submitBtn.textContent='–ü–æ–¥–∫–ª—é—á–∞–µ–º...';

  try {
    const response = await fetch(GAS_WEB_APP_URL,{
      method:'POST',
      mode:'cors',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify({name:name, phone:phone, ts:new Date().toISOString()})
    });
    const result = await response.json();
    if(result.status==='success'){
      submitBtn.textContent='–ì–æ—Ç–æ–≤–æ ‚Äî –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º';
      setTimeout(()=>{ 
        window.open(WHATSAPP_INVITE_LINK,'_blank');
        submitBtn.disabled=false;
        submitBtn.textContent='WhatsApp “õ–æ—Å—ã–ª—É';
      },850);
    } else {
      throw new Error(result.message || '–û—à–∏–±–∫–∞');
    }
  } catch(err){
    console.error(err);
    msgEl.textContent='–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏';
    msgEl.style.display='block';
    submitBtn.disabled=false;
    submitBtn.textContent='WhatsApp “õ–æ—Å—ã–ª—É';
  }
});

// üîπ Canvas particles
(function(){
  const canvas=document.getElementById('bg-canvas');
  const ctx=canvas.getContext('2d');
  let w=canvas.width=innerWidth;
  let h=canvas.height=innerHeight;
  const particles=[];
  const mouse={x:-9999,y:-9999};
  for(let i=0;i<150;i++){
    particles.push({x:Math.random()*w, y:Math.random()*h, r:Math.random()*6+2, vx:(Math.random()-0.5)*0.5, vy:(Math.random()-0.5)*0.5});
  }
  window.addEventListener('resize',()=>{w=canvas.width=innerWidth; h=canvas.height=innerHeight;});
  window.addEventListener('mousemove',e=>{mouse.x=e.clientX; mouse.y=e.clientY;});
  function loop(){
    ctx.clearRect(0,0,w,h);
    for(const p of particles){
      p.x += p.vx; p.y += p.vy;
      const dx=p.x-mouse.x; const dy=p.y-mouse.y; const dist=Math.sqrt(dx*dx+dy*dy);
      if(dist<100){p.x+=(dx/dist)*2; p.y+=(dy/dist)*2;}
      if(p.x<0)p.x=w; if(p.x>w)p.x=0; if(p.y<0)p.y=h; if(p.y>h)p.y=0;
      ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle='rgba(255,255,255,0.8)'; ctx.fill();
    }
    requestAnimationFrame(loop);
  }
  loop();
})();
</script>
</body>
</html>
